hostname dc1-spine1
!
service routing protocols model multi-agent
username lfurtado privilege 15 secret 0 Juniper
username clab privilege 15 secret 0 clab
!
ip routing
!
interface Loopback0
   ip address 10.1.254.1/32
!
interface Ethernet1
   description to-dc1-leaf1
   no switchport
   ip address 10.1.0.1/31
interface Ethernet2
   description to-dc1-leaf2
   no switchport
   ip address 10.1.0.9/31
interface Ethernet3
   description to-dc1-leaf3
   no switchport
   ip address 10.1.0.17/31
interface Ethernet4
   description to-dc1-leaf4
   no switchport
   ip address 10.1.0.25/31
interface Ethernet5
   description to-dc1-router1
   no switchport
   ip address 10.1.0.33/31
interface Ethernet6
   description to-dc1-router2
   no switchport
   ip address 10.1.0.37/31
!
router bgp 65001
   router-id 10.1.254.1
   no bgp default ipv4-unicast
   !
   neighbor DC1-UNDERLAY peer group
   neighbor DC1-UNDERLAY send-community
   neighbor DC1-UNDERLAY maximum-routes 12000
   !
   neighbor 10.1.0.0 peer group DC1-UNDERLAY
   neighbor 10.1.0.0 remote-as 65101
   neighbor 10.1.0.8 peer group DC1-UNDERLAY
   neighbor 10.1.0.8 remote-as 65102
   neighbor 10.1.0.16 peer group DC1-UNDERLAY
   neighbor 10.1.0.16 remote-as 65103
   neighbor 10.1.0.24 peer group DC1-UNDERLAY
   neighbor 10.1.0.24 remote-as 65104
   neighbor 10.1.0.32 peer group DC1-UNDERLAY
   neighbor 10.1.0.32 remote-as 65151
   neighbor 10.1.0.36 peer group DC1-UNDERLAY
   neighbor 10.1.0.36 remote-as 65152
   !
   neighbor DC1-EVPN peer group
   neighbor DC1-EVPN ebgp-multihop 3
   neighbor DC1-EVPN update-source Loopback0
   neighbor DC1-EVPN send-community extended
   neighbor DC1-EVPN next-hop-unchanged
   neighbor DC1-EVPN maximum-routes 12000
   !
   neighbor 10.1.254.11 peer group DC1-EVPN
   neighbor 10.1.254.11 remote-as 65101
   neighbor 10.1.254.12 peer group DC1-EVPN
   neighbor 10.1.254.12 remote-as 65102
   neighbor 10.1.254.13 peer group DC1-EVPN
   neighbor 10.1.254.13 remote-as 65103
   neighbor 10.1.254.14 peer group DC1-EVPN
   neighbor 10.1.254.14 remote-as 65104
   neighbor 10.1.254.21 peer group DC1-EVPN
   neighbor 10.1.254.21 remote-as 65151
   neighbor 10.1.254.22 peer group DC1-EVPN
   neighbor 10.1.254.22 remote-as 65152
   !
   address-family ipv4
      neighbor DC1-UNDERLAY activate
      network 10.1.254.1/32
   address-family evpn
      neighbor DC1-EVPN activate
!
end
