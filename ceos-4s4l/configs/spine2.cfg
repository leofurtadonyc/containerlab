hostname spine2
!
service routing protocols model multi-agent
!
username lfurtado privilege 15 secret 0 Juniper
!
!
ip routing
!
interface Loopback0
   ip address 10.255.0.2/32
!
interface Ethernet1
   description to-leaf1
   no switchport
   ip address 10.0.0.3/31
!
interface Ethernet2
   description to-leaf2
   no switchport
   ip address 10.0.0.11/31
!
interface Ethernet3
   description to-leaf3
   no switchport
   ip address 10.0.0.19/31
!
interface Ethernet4
   description to-leaf4
   no switchport
   ip address 10.0.0.27/31
!
router bgp 65000
   router-id 10.255.0.2
   no bgp default ipv4-unicast
!
   neighbor LEAF-UNDERLAY peer group
   neighbor LEAF-UNDERLAY send-community
   neighbor LEAF-UNDERLAY maximum-routes 12000
!
   neighbor 10.0.0.2 peer group LEAF-UNDERLAY
   neighbor 10.0.0.2 remote-as 65101
   neighbor 10.0.0.10 peer group LEAF-UNDERLAY
   neighbor 10.0.0.10 remote-as 65102
   neighbor 10.0.0.18 peer group LEAF-UNDERLAY
   neighbor 10.0.0.18 remote-as 65103
   neighbor 10.0.0.26 peer group LEAF-UNDERLAY
   neighbor 10.0.0.26 remote-as 65104
!
   neighbor LEAF-EVPN peer group
   neighbor LEAF-EVPN ebgp-multihop 3
   neighbor LEAF-EVPN update-source Loopback0
   neighbor LEAF-EVPN send-community extended
   neighbor LEAF-EVPN maximum-routes 12000
!
   neighbor 10.255.1.1 peer group LEAF-EVPN
   neighbor 10.255.1.1 remote-as 65101
   neighbor 10.255.1.2 peer group LEAF-EVPN
   neighbor 10.255.1.2 remote-as 65102
   neighbor 10.255.1.3 peer group LEAF-EVPN
   neighbor 10.255.1.3 remote-as 65103
   neighbor 10.255.1.4 peer group LEAF-EVPN
   neighbor 10.255.1.4 remote-as 65104
!
   address-family ipv4
      neighbor LEAF-UNDERLAY activate
      network 10.255.0.2/32
!
   address-family evpn
      neighbor LEAF-EVPN activate
      neighbor LEAF-EVPN next-hop-unchanged
!
end
